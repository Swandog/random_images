<html>
    <body>
        <img>    
    </body>
        
    <script>
        console.log("start")
        var url = 'http://127.0.0.1:8080/'
        const request = new Request(url + 'image_list.txt')

        var myImage = document.querySelector('img')
        var imageFiles=[]

        function loadRandomImage( ) {
            var index = Math.floor(Math.random() * imageFiles.length)

            var newImage=url + imageFiles[index]
            console.log(index + ' ' + newImage)

            myImage.src = newImage
        }

        fetch(request)
        .catch(reason => {console.log("oh no");})
        .then(response => response.text())
        .then(contents => {
            imageFiles=String(contents).split(/\s+/)
            console.log(imageFiles)
        })
        .then(loadRandomImage)
    </script>
</html>
